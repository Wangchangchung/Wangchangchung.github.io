<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>hibernate框架——关系操作(三) | Charse Wan&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="在之前两篇博文中，介绍了Hibernate框架的基本操作和对象的状态和一级缓存的知识，在本篇博文中将介绍对象之间的关系操作.">
<meta property="og:type" content="article">
<meta property="og:title" content="hibernate框架——关系操作(三)">
<meta property="og:url" content="http://yoursite.com/2016/11/04/hibernate框架——关系操作(三)/index.html">
<meta property="og:site_name" content="Charse Wan's Blog">
<meta property="og:description" content="在之前两篇博文中，介绍了Hibernate框架的基本操作和对象的状态和一级缓存的知识，在本篇博文中将介绍对象之间的关系操作.">
<meta property="og:image" content="http://yoursite.com/picture/hibernate3/selectclass.png">
<meta property="og:image" content="http://yoursite.com/picture/hibernate3/selectstudent.png">
<meta property="og:image" content="http://yoursite.com/picture/hibernate3/selectupdate.png">
<meta property="og:image" content="http://yoursite.com/picture/hibernate3/remove_null.png">
<meta property="og:image" content="http://yoursite.com/picture/hibernate3/remove_studnet.png">
<meta property="og:image" content="http://yoursite.com/picture/hibernate3/save_student_and_classes.png">
<meta property="og:updated_time" content="2016-11-04T13:29:15.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hibernate框架——关系操作(三)">
<meta name="twitter:description" content="在之前两篇博文中，介绍了Hibernate框架的基本操作和对象的状态和一级缓存的知识，在本篇博文中将介绍对象之间的关系操作.">
<meta name="twitter:image" content="http://yoursite.com/picture/hibernate3/selectclass.png">
  
    <link rel="alternate" href="/atom.xml" title="Charse Wan&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Charse Wan&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-hibernate框架——关系操作(三)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/04/hibernate框架——关系操作(三)/" class="article-date">
  <time datetime="2016-11-04T12:20:44.000Z" itemprop="datePublished">2016-11-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hibernate-Java/">hibernate Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      hibernate框架——关系操作(三)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在之前两篇博文中，介绍了Hibernate框架的基本操作和对象的状态和一级缓存的知识，在本篇博文中将介绍对象之间的关系操作.<br><a id="more"></a></p>
<h1 id="关系操作"><a href="#关系操作" class="headerlink" title="关系操作"></a><strong>关系操作</strong></h1><h2 id="一对多的单项关联"><a href="#一对多的单项关联" class="headerlink" title="一对多的单项关联"></a><strong>一对多的单项关联</strong></h2><h3 id="持久化类和映射文件"><a href="#持久化类和映射文件" class="headerlink" title="持久化类和映射文件"></a><strong>持久化类和映射文件</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Classes</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> Long cid;</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> String description;</div><div class="line">	<span class="keyword">private</span> Set&lt;Student&gt; studnets;</div><div class="line">	<span class="comment">// set和get方法因为版面，省略不写</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span>  <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> Long sid;</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> String description;</div><div class="line">	<span class="keyword">private</span> Classes classes;</div><div class="line">	<span class="comment">// set和get方法因为版面，省略不写</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以看到只能通过Classes查找到Student，但是不能通过student查找到Classes。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></div><div class="line">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.wcc.hibernate.domain.Classes"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>= <span class="string">"cid"</span>  <span class="attr">length</span> = <span class="string">"5"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">length</span>=<span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">length</span>=<span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- </span></div><div class="line">			cascade 级联</div><div class="line">				save-update : 当保存或者更新classes的时候，级联操作student</div><div class="line">				inverse  ：维护关系</div><div class="line">						true  不维护关系</div><div class="line">						false 维护关系</div><div class="line">						default  默认设置为false		</div><div class="line">		 --&gt;</div><div class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"students"</span>  <span class="attr">cascade</span>=<span class="string">"save-update"</span>&gt;</span></div><div class="line">				<span class="comment">&lt;!--	key 代表外键 : 用来关联classes 和student表，用于在hibernate底层生成SQL语句。 --&gt;</span></div><div class="line">				 <span class="tag">&lt;<span class="name">key</span>&gt;</span></div><div class="line">				 	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"cid"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">				 <span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">				<span class="comment">&lt;!-- 建立类与类之间的关联，用于客户端的编码 --&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"com.wcc.hibernate.domain.Student"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>从映射文件可以看出，set元素描述了两个方面的内容：</p>
<ol>
<li>key从外键的角度描述了两者之间的关系，用于生成SQL语句。</li>
<li>one-to-many 从类与类的角度描述了两者的关系，用于客户端的编码</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 保存班级同时保存学生</span></div><div class="line">	<span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSaveStudentAndStudnt</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session=HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">		</div><div class="line">  <span class="comment">//创建一个Class对象</span></div><div class="line">  Classes classes = <span class="keyword">new</span>  Classes();</div><div class="line">  <span class="comment">//classes.setCid(2L);</span></div><div class="line">  classes.setName(<span class="string">"java"</span>);</div><div class="line">  classes.setDescription(<span class="string">"java基础"</span>);</div><div class="line">		</div><div class="line">  <span class="comment">//创建学生的集合</span></div><div class="line">  Set&lt;Student&gt; students = <span class="keyword">new</span> HashSet&lt;Student&gt;();</div><div class="line">	</div><div class="line">  <span class="comment">//创建两个学生</span></div><div class="line">  Student student = <span class="keyword">new</span> Student();</div><div class="line">  student.setName(<span class="string">"毕向东"</span>);</div><div class="line">  student.setDescription(<span class="string">"java大师"</span>);</div><div class="line">		</div><div class="line">  Student student2 = <span class="keyword">new</span> Student();</div><div class="line">  student2.setName(<span class="string">"王昭珽"</span>);</div><div class="line">  student2.setDescription(<span class="string">"web大师"</span>);		</div><div class="line">		</div><div class="line">  students.add(student);</div><div class="line">  students.add(student2);</div><div class="line">  <span class="comment">//通过Class建立classes与student之间的关联</span></div><div class="line">  classes.setStudnets(students);</div><div class="line">  session.save(classes);</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>说明<br>1、在hibernate中，通过国session.save方法保存一个持久化对象，这中方式成为显式保存。<br>2、在hibernate中，通过级联的方式来操作一个对象，这样的方式称为隐式操作。<br>3、对student对象进行隐式的保存操作，是因为studnet是一个临时状态的对象，在数据库中有没对应的记录，所以应该对student执行insert语句。</p>
</blockquote>
<p><strong>更新班级级联更新学生</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 更新班级的时候级联学生</div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateStudentAndClasses</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  <span class="comment">//获取cid为2的classes</span></div><div class="line">  Classes classes = (Classes) session.get(Classes.class, <span class="number">2L</span>);</div><div class="line">  <span class="comment">//获取该班级的所有学生</span></div><div class="line">  Set&lt;Student&gt; set = classes.getStudnets();</div><div class="line">  <span class="keyword">for</span> (Student student : set) &#123;</div><div class="line">	student.setDescription(<span class="string">"好孩子"</span>);</div><div class="line">  &#125;</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>说明:</p>
<ol>
<li>当执行Classes classes = (Classes)session.get(Classes.class, 2L);的时候产生如下的SQL语句。<br><img src="/picture/hibernate3/selectclass.png" alt="输出Classes的查询"></li>
</ol>
</blockquote>
<p>2.当执行Set<student> set = classes.getStudnets();的时候，产生了如下SQL语句<br><img src="/picture/hibernate3/selectstudent.png" alt="输出Student的查询"></student></p>
<ol>
<li>当执行    transaction.commit();的时候执行如下的SQL语句。该语句有两条，得到的set集合中有两条记录。<br><img src="/picture/hibernate3/selectupdate.png" alt="学生的update"></li>
<li>没有发出更新classess的update语句，因为classes的属性没有发生改变。</li>
</ol>
<p><strong>总结</strong><br><strong>Cascade:</strong><br><strong>Save-update</strong><br>在session.save/update 一个对象的时候，级联操作关联对象，关联对象或者执行save语句或者执行update语句或者什么都不执行<br><strong>Delete</strong><br>在session.delete一个对下那个的时候，级联删除关联对象<br><strong>All</strong><br>save-update和delete的结合</p>
<h3 id="在次讨论session-flush"><a href="#在次讨论session-flush" class="headerlink" title="在次讨论session.flush"></a><strong>在次讨论session.flush</strong></h3><ol>
<li>检查session一级缓存中所放入持久化对象的状态，决定发出insert语句或者update语句。</li>
<li>会检查所有的持久化对象关联对象，如果有级联操作，则对关联对象进行insert语句或update语句。</li>
</ol>
<h3 id="关系操作-1"><a href="#关系操作-1" class="headerlink" title="关系操作"></a><strong>关系操作</strong></h3><h4 id="让一个新的学生加入已经存在的班级"><a href="#让一个新的学生加入已经存在的班级" class="headerlink" title="让一个新的学生加入已经存在的班级"></a><strong>让一个新的学生加入已经存在的班级</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">	</div><div class="line"><span class="comment">//关系操作  让一个新的学生加入已经存在的班级</span></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testNewStudentAddClasses</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction =  session.beginTransaction();</div><div class="line">  Student student = <span class="keyword">new</span> Student();</div><div class="line">  student.setName(<span class="string">"王小臭"</span>);</div><div class="line">  student.setDescription(<span class="string">"好厉害"</span>);</div><div class="line">  Classes classes =  (Classes) session.get(Classes.class, <span class="number">2L</span>);</div><div class="line">  <span class="comment">//得到该班的所有学生， 将新的学生添加大班级中</span></div><div class="line">  classes.getStudents().add(student);</div><div class="line">  <span class="comment">/*</span></div><div class="line">  这里面要进行session.save(student);吗？ 这里是如果想让hibernate隐式对的操作，那么就在映射文件中set元素的cascade 属性为save-update*/</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
<ol>
<li>当执行 Classes classes = (Classes)session.get(Classes.class, 2L);语句的时候，hibernate会发出加载classes的SQL语句。</li>
<li>当执行classes.getStudents().add(student);的时候，会发出加载classes班级中的所有的学生的SQL语句</li>
<li>因为Classes.hbm.xml 文件中set元素的cascade属性设置了save-update，所以在更新classes的时候，要检查classes中的student集合，发现集合中多了一个对象，所以要对该对象进行insert语句。<br>4.当执行session.flush的时候，会发出维护关系的update语句，因为classes负责维护classes与student之间的关系。</li>
</ol>
</blockquote>
<p>Classes.hbm.xml文件中的set元素：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">&lt;!--cascade ：级联</span></div><div class="line">	  save-update : 当保存或者更新classes的时候，级联操作student</div><div class="line">     inverse ：维护关系</div><div class="line">	   true  不维护关系</div><div class="line">	   false 维护关系</div><div class="line">	   default  默认设置为false:inverse属性没有写，保持默认值，维护classess与studnet 之间的关系--&gt;</div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"students"</span>  <span class="attr">cascade</span>=<span class="string">"save-update"</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- key 代表外键 : 用来关联classes 和student表，用于在hibernate底层生成SQL语句。--&gt;</span></div><div class="line">	 <span class="tag">&lt;<span class="name">key</span>&gt;</span></div><div class="line">	 	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"cid"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">	 <span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 建立类与类之间的关联，用于客户端的编码 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"com.wcc.hibernate.domain.Student"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h4 id="重新建立关系1"><a href="#重新建立关系1" class="headerlink" title="重新建立关系1"></a><strong>重新建立关系1</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//重新更新关系</span></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">testChangRealtive</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction  = session.beginTransaction();</div><div class="line">  <span class="comment">//先找到一个学生的对象</span></div><div class="line">  Student student = (Student) session.get(Student.class,  <span class="number">1L</span>);</div><div class="line">  Classes classes = (Classes) session.get(Classes.class, <span class="number">1L</span>);</div><div class="line">  Classes classes2 = (Classes) session.get(Classes.class,<span class="number">2L</span>);</div><div class="line">  <span class="comment">// 先要解除原来的关系，</span></div><div class="line">  classes.getStudents().remove(student);</div><div class="line">  <span class="comment">//再将这个学生和其他的班级进行关联</span></div><div class="line">  classes2.getStudents().add(student);</div><div class="line">  <span class="comment">/*</span></div><div class="line">  因为我们这里拿到的全是持久化对象，所以，</div><div class="line">  不用进行Session.save（）的操作。</div><div class="line">  */</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
<ul>
<li>执行    classes.getStudents().remove(student);的时候，发出维护关系的SQL语句<br><img src="/picture/hibernate3/remove_null.png" alt="remove_null"><br>因为解除了关系了，所以cid为null</li>
<li>classes2.getStudents().add(student);的时候，发出更新的操作。<br><img src="/picture/hibernate3/remove_studnet.png" alt="remove_studnet"><br>因为建立了关系，所以更新了外键</li>
</ul>
</blockquote>
<ul>
<li>从上面的代码和SQL语句可以看出，外键变了两次，但是不需要改变两次，请看下面的优化版的重新建立关系。</li>
</ul>
<h4 id="重新建立关系2"><a href="#重新建立关系2" class="headerlink" title="重新建立关系2"></a><strong>重新建立关系2</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//重新更新关系</span></div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">testChangRealtive</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction  = session.beginTransaction();</div><div class="line">  <span class="comment">//先找到一个学生的对象</span></div><div class="line">  Student student = (Student) session.get(Student.class,  <span class="number">1L</span>);</div><div class="line">  Classes classes = (Classes) session.get(Classes.class, <span class="number">1L</span>);</div><div class="line">  <span class="comment">// 建立学生的新的班级关系</span></div><div class="line">  classes.getStudents().add(student);</div><div class="line">  <span class="comment">/*因为我们这里拿到的全是持久化对象，所以，不用进行Session.save（）的操作。</span></div><div class="line">  */</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：只需要建立关系就可以了，因为发出的是更新外键的SQL语句，把外键的值改变了就可以了。</p>
</blockquote>
<h4 id="解除一个学生和一个班级之间的关系"><a href="#解除一个学生和一个班级之间的关系" class="headerlink" title="解除一个学生和一个班级之间的关系"></a><strong>解除一个学生和一个班级之间的关系</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 已经存在一个班级，已经存在一个学生，</div><div class="line">* 解除该学生和改班级之间的关系</div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReleaseR</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line"><span class="comment">/**</span></div><div class="line"> * 基础cid 为2 和sid为2 的关系</div><div class="line">*/</div><div class="line">  Student student =  (Student) session.get(Student.class, <span class="number">2L</span>);</div><div class="line">  Classes classes = (Classes) session.get(Classes.class, <span class="number">2L</span>);</div><div class="line">  <span class="comment">// 得到该班级class 然后在从学生的集合中删除该学生</span></div><div class="line">  <span class="comment">//即可以解除该学生与之前的关系</span></div><div class="line">  classes.getStudents().remove(student);</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="解除该班级和所有学生之间的关系"><a href="#解除该班级和所有学生之间的关系" class="headerlink" title="解除该班级和所有学生之间的关系"></a><strong>解除该班级和所有学生之间的关系</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 解除该班级和所有学生之间的关系</div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRealseAll</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.getTransaction();</div><div class="line">  Classes classes = (Classes) session.get(Classes.class,<span class="number">2L</span>);</div><div class="line">  <span class="comment">//classes.getStduents().clear(); 这样操作是查询出学生之后，一个个清除，效率是不高的。</span></div><div class="line">  classes.setStudents(<span class="keyword">null</span>);<span class="comment">//这样写就是不查询的，效率是最高的。</span></div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>一般来说hibernate发出的SQL语句越少的话，效率是越高的，当执行 classes.setStudents(null) 的时候，不需要根据学生进行加载了，这样执行效率会更加的高效一些。</p>
</blockquote>
<h4 id="删除班级"><a href="#删除班级" class="headerlink" title="删除班级"></a><strong>删除班级</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 删除班级</div><div class="line"> * &lt;set name= "students" save="save-update"&gt;</div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteClasses</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session  = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  Classes classes = (Classes) session.get(Classes.class, <span class="number">2L</span>);</div><div class="line">  session.delete(classes);</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
<ol>
<li>classes负责维护关系。</li>
<li>在执行session.flush的时候，在删除班级之前，解除该班级和所有的学生之间的关系（Student表中的外键全变为null，即解除了关系）。 如果你设置在配置文件中的set 节点中inverse  为true（即不维护表之间的关系），那么在删除班级的时候是不会进行Student表的外键解除约束的，这样就会报错。在这种情况下，只能先去删除学生，再去删除班级了，所以说，不同的配置，就对应不同的代码和逻辑的操作。</li>
<li>解除关系以后，再删除班级。</li>
<li>上诉的代码是：先查询班级，再查询该班级中的每一个学生，再根据每一个学生的sid删除每一个学生，这样的效率比较低。</li>
</ol>
</blockquote>
<h4 id="删除班级级联删除学生"><a href="#删除班级级联删除学生" class="headerlink" title="删除班级级联删除学生"></a><strong>删除班级级联删除学生</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 删除班级，级联删除学生</div><div class="line">* &lt;set name="students" save="all" &gt; </div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteCalsses</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  Classes classes = (Classes) session.get(Classes.class, <span class="number">2L</span>);</div><div class="line">  session.delete(classes);</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="在hibernate中Cascade-与inverse的区别"><a href="#在hibernate中Cascade-与inverse的区别" class="headerlink" title="在hibernate中Cascade 与inverse的区别"></a><strong>在hibernate中Cascade 与inverse的区别</strong></h3><ul>
<li>cascade描述的是对象与对象之间的关系， cascade和外键没有关系，在Studen表中，sid、name、description和cascade有关系，但是cid和cascade没有关系。</li>
<li>inverse描述的是对象与外键之间的关系，inverse只和cid有关系，如果维护，则发出update语句(更新外键的SQL语句)，如果不维护，则不管。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h3><ul>
<li>只能通过classes操作student</li>
<li>只要classes维护关系，就会发出维护关系的update语句，所以让classes维护关系效率比较低。</li>
<li>让student维护效率比较高（让较多的一方维护效率更高）</li>
<li>Session.flush的时候，hibernate内部做的事情<br>1、检查一级缓存中所有的持久化对象，决定发出insert语句还是update语句<br>2、检查持久化对象的关联对象，看持久化对象的映射文件中的cascade，决定关联对象是否发出insert语句或者update语句或者delete语句<br>3、检查持久化对象的映射文件的针对关联对象的inverse属性，来决定是否维护关系，如果维护关系，则发出update语句(维护关系的语句)</li>
</ul>
<h2 id="一对多双向关联"><a href="#一对多双向关联" class="headerlink" title="一对多双向关联"></a><strong>一对多双向关联</strong></h2><p>Classes对象<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Classes</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</div><div class="line">   <span class="keyword">private</span> Long cid;</div><div class="line">   <span class="keyword">private</span> String name;</div><div class="line">   <span class="keyword">private</span> String description;</div><div class="line">   <span class="keyword">private</span> Set&lt;Student&gt; studnets;</div><div class="line">   ...</div><div class="line">   <span class="comment">//省略 set和get方法</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Student对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span>  <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> Long sid;</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> String description;</div><div class="line">	<span class="keyword">private</span> Classes classes;</div><div class="line">	<span class="comment">//省略set和get方法</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Student映射文件如下图，其中可以发现配置中 Classess中有一个外键，Student建立关联的时候也有一个外键，那么会不会有冲突呢?事实上是，通过谁建立关系，就看谁的映射文件，那么就使用按个外键。不会进行冲突的。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span></div><div class="line">"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"com.wcc.hibernate.domain.Student"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">"sid"</span> <span class="attr">length</span>=<span class="string">"5"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"increment"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">length</span> = <span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">length</span> = <span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!--	column 为外键--&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"classes"</span> <span class="attr">column</span>=<span class="string">"cid"</span> <span class="attr">class</span>=<span class="string">"com.wcc.hibernate.domain.Classes"</span> <span class="attr">cascade</span>=<span class="string">"save-update"</span></span></div><div class="line">		&gt;</div><div class="line">		<span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a><strong>操作</strong></h3><p><strong>保存学生，级联保存班级</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">  保存学生，级联保存班级</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSaveStudent_Cascade_SaveClass</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  Student student = <span class="keyword">new</span> Student();</div><div class="line">  student.setName(<span class="string">"cc"</span>);</div><div class="line">  Classes classes = <span class="keyword">new</span> Classes();</div><div class="line">  classes.setName(<span class="string">"皇马"</span>);</div><div class="line">  <span class="comment">// 通过sudent建立student与classess 之间的联系</span></div><div class="line">  student.setClasses(classes);</div><div class="line">  session.save(student);</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>说明：</p>
<ol>
<li>studnet.setClasses(classes)是通过student建立student与classes之间的关联，所以看外键时是看Student.hubm.xml文件，不看Classes文件了。</li>
<li>在Student.hbm.xml文件中，设置了针对classes的级联<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"classes"</span> <span class="attr">column</span>=<span class="string">"cid"</span> <span class="attr">class</span>=<span class="string">"com.wcc.hibernate.domain.Classes"</span> <span class="attr">cascade</span>=<span class="string">"save-update"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<p>3.在保存学生的时候级联保存了班级<br>4.保存学生相当于维护了关系。在保存学生的时候，cid有值了，不需要发出维护关系的update语句。<br><img src="/picture/hibernate3/save_student_and_classes.png" alt="保存班级级联保存学生"></p>
<h4 id="新建一个学生，并且和一个已存在的班级级联"><a href="#新建一个学生，并且和一个已存在的班级级联" class="headerlink" title="新建一个学生，并且和一个已存在的班级级联"></a><strong>新建一个学生，并且和一个已存在的班级级联</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 新建一个学生，并且和一个已存在的班级关联</div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">testSaveStudent_BuildR</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  Student student = <span class="keyword">new</span> Student();</div><div class="line">  student.setName(<span class="string">"王小模"</span>);</div><div class="line">  student.setDescription(<span class="string">"好好的"</span>);</div><div class="line">  <span class="comment">//将班级提取出来</span></div><div class="line">  Classes classes =  (Classes) session.get(Classes.class, <span class="number">2L</span>);</div><div class="line">  <span class="comment">//通过学生来进行与班级的关系操作</span></div><div class="line">  student.setClasses(classes);</div><div class="line">  <span class="comment">// 保存到了 student</span></div><div class="line">  session.save(student);</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="学生转班操作"><a href="#学生转班操作" class="headerlink" title="学生转班操作"></a><strong>学生转班操作</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 学生转班</div><div class="line">* */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testTransfran</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  Student student = (Student) session.get(Student.class, <span class="number">2L</span>);</div><div class="line">  Classes classes = (Classes) session.get(Classes.class, <span class="number">1L</span>);</div><div class="line">  <span class="comment">// 学生转班级</span></div><div class="line">  student.setClasses(classes);</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上述代码执行时hibernate输出的SQL语句其中有如下语句：</p>
<blockquote>
<p>说明： 从上述的SQL语句可以看出不仅更新了外键，而且把其他的属性也更新了，所以更新关系指的就是更新student 对象本身的操作。</p>
</blockquote>
<h4 id="解除一个班级和一个学生之间的关系"><a href="#解除一个班级和一个学生之间的关系" class="headerlink" title="解除一个班级和一个学生之间的关系"></a><strong>解除一个班级和一个学生之间的关系</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 解除一个班级和一个学生的关系</div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRealse</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  Student  student = (Student) session.get(Student.class, <span class="number">1L</span>);</div><div class="line">  student.setClasses(<span class="keyword">null</span>);</div><div class="line">  transaction.commit();		</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="解除该班和所有的学生的关系"><a href="#解除该班和所有的学生的关系" class="headerlink" title="解除该班和所有的学生的关系"></a><strong>解除该班和所有的学生的关系</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 解除一个班级所有学生的与它的关系</div><div class="line">* */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRealseAll</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  Classes classes = (Classes) session.get(Classes.class, <span class="number">2L</span>);</div><div class="line">  Set&lt;Student&gt; set =  classes.getStudnets();</div><div class="line">  <span class="comment">//取得该班的所有的学生集合， </span></div><div class="line">  <span class="comment">//然后一个一个的解除该班的学生关系。</span></div><div class="line">  <span class="comment">// 但是，这个的效率说是并不太高的。</span></div><div class="line">  <span class="keyword">for</span> (Student student : set) &#123;</div><div class="line"> 	student.setClasses(<span class="keyword">null</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a><strong>总结</strong></h4><p>一般情况下，一对多，多的一方维护关系效率比较高。</p>
<h2 id="多对多的双向关联"><a href="#多对多的双向关联" class="headerlink" title="多对多的双向关联"></a><strong>多对多的双向关联</strong></h2><p>Course 类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Course</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> Long cid;</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> String description;</div><div class="line">	<span class="keyword">private</span> Set&lt;Student&gt; students;</div><div class="line">	<span class="comment">//set和get 方法由于版面的问题，在此就不再写出。</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Student类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span>  <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> Long sid;</div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> String description;</div><div class="line">	<span class="keyword">private</span> Set&lt;Course&gt;  course;</div><div class="line">	<span class="comment">//set和get 方法由于版面的问题，在此就不再写出。</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>1. 一对多体现的是类与集合的关系</strong><br><strong>2. 多对一体现的是类与类之间的关系</strong><br><strong>3. 多对多体现的是类与集合之间的关系</strong></p>
<p>Course.hbm.xml 配置文件中的set元素<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"students"</span>  <span class="attr">table</span>=<span class="string">"student_course"</span>  <span class="attr">cascade</span>=<span class="string">"save-update"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- table为关联表， 为了生成关联的sql语句--&gt;</span></div><div class="line">	 <span class="tag">&lt;<span class="name">key</span>&gt;</span></div><div class="line">	 	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"cid"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">	 	<span class="comment">&lt;!--course通过cid与student_course表关联--&gt;</span></div><div class="line">	 <span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--class: 描述类与类之间的关系</span></div><div class="line">        column：student 表通过sid与studnet_course表关联</div><div class="line">    --&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"com.wcc.hibernate.domain.Student"</span> <span class="attr">column</span>=<span class="string">"sid"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>Student.hbm.xml 配置文件中的set元素<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"courses"</span> <span class="attr">table</span>=<span class="string">"student_course"</span> <span class="attr">cascade</span>=<span class="string">"save-update"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- table为关联表， 为了生成关联的sql语句--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"sid"</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></div><div class="line">    	<span class="comment">&lt;!--student通过sid与student_course进行关联--&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"com.wcc.hibernate.domain.Course"</span>  <span class="attr">column</span>=<span class="string">"cid"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--Course表通过cid来与student_course表进行关联--&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="关系维护"><a href="#关系维护" class="headerlink" title="关系维护"></a><strong>关系维护</strong></h3><p> <strong>1. 建立关系，相当于在第三张表中插入一行数据。</strong><br> <strong>2. 解除关系，相当于在第三张表中删除一行数据。</strong><br> <strong>3. 重新建立关系，相当于先删除一行数据，再增加一行数据。</strong><br> <strong>4. 多对多，谁维护关系效率都一样。</strong></p>
<h3 id="操作-1"><a href="#操作-1" class="headerlink" title="操作"></a><strong>操作</strong></h3><h4 id="让一个新的学生和一个已经存在的课程发生关联"><a href="#让一个新的学生和一个已经存在的课程发生关联" class="headerlink" title="让一个新的学生和一个已经存在的课程发生关联"></a><strong>让一个新的学生和一个已经存在的课程发生关联</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSaveStudent_BuildR</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  Course course = (Course) session.get(Course.class, <span class="number">1L</span>);</div><div class="line">  <span class="comment">//  得到cid为1的课程</span></div><div class="line">  <span class="comment">// 创建一个学生</span></div><div class="line">  Student  student = <span class="keyword">new</span> Student();</div><div class="line">  student.setName(<span class="string">"黄晓明"</span>);</div><div class="line">  student.setDescription(<span class="string">"很帅"</span>);</div><div class="line">  <span class="comment">//为这个学生创建一个 课程的集合</span></div><div class="line">  <span class="comment">//course.getStudents().add(student);</span></div><div class="line">  <span class="comment">//通过课程关联学生，这样的操作效率是比较低的，</span></div><div class="line">  <span class="comment">//因为要根据课程查询学生要发出SQL语句。</span></div><div class="line">  Set&lt;Course&gt; courses = <span class="keyword">new</span> HashSet&lt;Course&gt;();</div><div class="line">  <span class="comment">// 添加取出的课程 到课程的集合中</span></div><div class="line">  courses.add(course);</div><div class="line">  <span class="comment">// 给这个学生对象设置课程的集合  </span></div><div class="line">  <span class="comment">//通过学生建立与课程之间的联系。</span></div><div class="line">  student.setCourse(courses);</div><div class="line">  <span class="comment">// 保存这个student对象</span></div><div class="line">  session.save(student);</div><div class="line">  transaction.commit();		</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：course.getStudents().add(student);是通过课程建立课程与学生之间的关联，执行course.getStudents()的时候，因为要查询该门课程中的所有学生，会发出根据课程查找该学生的SQL语句，这样做的效率比较低。</p>
</blockquote>
<h4 id="解除一个学生和一门课程之间的关系"><a href="#解除一个学生和一门课程之间的关系" class="headerlink" title="解除一个学生和一门课程之间的关系"></a><strong>解除一个学生和一门课程之间的关系</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 解除一个学生和一门课程之间的关系</div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReleaseR</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction =session.beginTransaction();</div><div class="line">	</div><div class="line">  Student student = (Student) session.get(Student.class, <span class="number">1L</span>);</div><div class="line">  Course course = (Course) session.get(Course.class, <span class="number">1L</span>);</div><div class="line">		</div><div class="line">  <span class="comment">//通过学生解除关系</span></div><div class="line">  student.getCourse().remove(course);</div><div class="line">  <span class="comment">//通过课程解除关系</span></div><div class="line">  <span class="comment">//course.getStudents().remove(student);</span></div><div class="line">  transaction.commit();	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="解除该课程和这门课程所有的学生之间的关系"><a href="#解除该课程和这门课程所有的学生之间的关系" class="headerlink" title="解除该课程和这门课程所有的学生之间的关系"></a><strong>解除该课程和这门课程所有的学生之间的关系</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">*解除该门课程和所有的学生之间的关联</div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testRealseAllR</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session = HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction transaction = session.beginTransaction();</div><div class="line">  Course course = (Course) session.get(Course.class, <span class="number">1L</span>);</div><div class="line">  course.setStudents(<span class="keyword">null</span>);</div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="一个学生从一门课程转移到另外一门课程"><a href="#一个学生从一门课程转移到另外一门课程" class="headerlink" title="一个学生从一门课程转移到另外一门课程"></a><strong>一个学生从一门课程转移到另外一门课程</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* 一个学生从一门课转移到另一门的课程中。</div><div class="line">*/</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testChangeCourse</span><span class="params">()</span></span>&#123;</div><div class="line">  Session session =  HibernateUtils.sessionFactory.getCurrentSession();</div><div class="line">  Transaction  transaction = session.beginTransaction();</div><div class="line">  Course course = (Course) session.get(Course.class, <span class="number">1L</span>);</div><div class="line">  Course course2 = (Course) session.get(Course.class, <span class="number">2L</span>);</div><div class="line">		</div><div class="line">  Student student = (Student) session.get(Student.class, <span class="number">1L</span>);</div><div class="line">  <span class="comment">// 先解这个对象，然后在进行</span></div><div class="line">  student.getCourse().remove(course);</div><div class="line">  <span class="comment">// 添加新的关系课程到这个集合中</span></div><div class="line">  student.getCourse().add(course2);</div><div class="line">  <span class="comment">// 提交</span></div><div class="line">  transaction.commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="一对一的双向"><a href="#一对一的双向" class="headerlink" title="一对一的双向"></a><strong>一对一的双向</strong></h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"classes"</span> <span class="attr">column</span>=<span class="string">"cid"</span></span></div><div class="line">    <span class="attr">class</span>=<span class="string">"com.wcc.hibernate.domain.Classes"</span></div><div class="line">    <span class="attr">cascade</span>=<span class="string">"save-update"</span> <span class="attr">unique</span>=<span class="string">"true"</span> &gt;</div><div class="line"><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>外键在student表中不能出现相同的值，外键是唯一的，所以是一对一的。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Classes classes = (Classes)session.get(Classes.class,<span class="number">6L</span>);</div><div class="line">student1.setClasses(classes);</div><div class="line">student2.setClasses(classes);</div><div class="line">session.save(student2);</div><div class="line">session.save(student1);</div></pre></td></tr></table></figure>
<p>以上的代码是不对的，因为上面的代码会导致student1和student2的外键都是为6L，不符合外键也是唯一的约束了。</p>
<h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a><strong>总结</strong></h3><p> <strong>1. 关系角度</strong><br>      一对多反映的是类与集合的关系<br>      多对一反映的是类与类 之间的关系<br>      多对多反映的是类与集合之间的关系<br><strong>2. 一对多，多的一方维护关系，效率比较高</strong><br><strong>3. 多对多，谁维护效率都一样</strong><br><strong>4. 通过谁建立关系，就看谁的映射文件</strong><br><strong>5. Cascade 与inverse之间的区别（详见上面专门对Cascade与inverse的区别）</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/04/hibernate框架——关系操作(三)/" data-id="civ4ygwjm002ezwcnlgmroqe0" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hibernate/">hibernate</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/11/05/Hibernate框架——二级缓存、Hql语句(四)/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nieuwer</strong>
      <div class="article-nav-title">
        
          Hibernate框架——二级缓存、Hql语句
        
      </div>
    </a>
  
  
    <a href="/2016/11/01/Hibernate框架——对象状态(二)/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title">Hibernate框架——对象状态、缓存(二)</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorieën</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP-前端-后端/">HTTP 前端 后端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hibernate-Java/">Hibernate Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM-Java/">JVM, Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hibernate-Java/">hibernate Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CheckBox/">CheckBox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Class字节码/">Class字节码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hibernate/">Hibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HotSpot垃圾收集算法/">HotSpot垃圾收集算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/">JVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java内存区域/">Java内存区域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java垃圾回收机制/">Java垃圾回收机制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hibernate/">hibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内存回收/">内存回收</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后端/">后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/垃圾收集算法/">垃圾收集算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/程序/">程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/索引/">索引</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/CheckBox/" style="font-size: 10px;">CheckBox</a> <a href="/tags/Class字节码/" style="font-size: 10px;">Class字节码</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Hibernate/" style="font-size: 10px;">Hibernate</a> <a href="/tags/HotSpot垃圾收集算法/" style="font-size: 10px;">HotSpot垃圾收集算法</a> <a href="/tags/JVM/" style="font-size: 16.67px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java内存区域/" style="font-size: 10px;">Java内存区域</a> <a href="/tags/Java垃圾回收机制/" style="font-size: 10px;">Java垃圾回收机制</a> <a href="/tags/MySQL/" style="font-size: 13.33px;">MySQL</a> <a href="/tags/hibernate/" style="font-size: 16.67px;">hibernate</a> <a href="/tags/内存回收/" style="font-size: 10px;">内存回收</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/后端/" style="font-size: 10px;">后端</a> <a href="/tags/垃圾收集算法/" style="font-size: 10px;">垃圾收集算法</a> <a href="/tags/数据库/" style="font-size: 16.67px;">数据库</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/程序/" style="font-size: 10px;">程序</a> <a href="/tags/索引/" style="font-size: 10px;">索引</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/05/Hibernate框架——二级缓存、Hql语句(四)/">Hibernate框架——二级缓存、Hql语句</a>
          </li>
        
          <li>
            <a href="/2016/11/04/hibernate框架——关系操作(三)/">hibernate框架——关系操作(三)</a>
          </li>
        
          <li>
            <a href="/2016/11/01/Hibernate框架——对象状态(二)/">Hibernate框架——对象状态、缓存(二)</a>
          </li>
        
          <li>
            <a href="/2016/10/05/Hibernate框架——基本操作(一)/">Hibernate框架——基本操作(一)</a>
          </li>
        
          <li>
            <a href="/2016/10/02/高性能场景下-HashMap的优化使用建议/">高性能场景下,HashMap的优化使用建议</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Charse Wang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>